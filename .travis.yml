language: scala # to trigger the build on JVM worker ('language: java' works the same)
env:
  - PLAY_VERSION=1.2.5
  - POSTGIS=2.0
services:
  - postgresql
before_install:
  - echo "yes" | sudo apt-add-repository ppa:ubuntugis/ubuntugis-unstable
  - sudo apt-get update -qq
  - sudo apt-get install -qq postgresql-9.1-postgis
before_script: 
  # create spatially-enabled database
  - psql -c 'create database gtfs_editor;' -U postgres
  - psql -U postgres -d gtfs_editor -c "CREATE EXTENSION postgis;"
  # get play framework
  - wget http://download.playframework.org/releases/play-${PLAY_VERSION}.zip
  - unzip -q play-${PLAY_VERSION}.zip 
  # copy over config file
  - cp conf/application.conf.template conf/application.conf
script: play-${PLAY_VERSION}/play test
notifications:
  # Email notifications are disabled to not annoy anybody.
  # See http://about.travis-ci.org/docs/user/build-configuration/ to learn more
  # about configuring notification recipients and more.
  email: false
